<svg width="640" height="880" viewBox="0 0 640 880" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">QPfolio Architecture (Vertical)</title>
  <desc id="desc">Three stacked boxes connected by center-to-center arrows: Core Optimization Engine at the bottom, Portfolio Optimization Methods in the middle, and Applications at the top.</desc>

  <!-- Background -->
  <rect x="0" y="0" width="640" height="880" fill="#ffffff"/>

  <!-- Header -->
  <text x="320" y="48" text-anchor="middle" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="22" font-weight="700" fill="#222222">QPfolio Architecture</text>
  <text x="320" y="74" text-anchor="middle" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#555555">Composable layers: Core Engine → Methods → Applications</text>

  <!-- Applications (top) -->
  <g id="applications" transform="translate(80, 140)">
    <rect x="0" y="0" rx="16" ry="16" width="480" height="160" fill="#fff7ed" stroke="#f59e0b" stroke-width="2"/>
    <text x="240" y="36" text-anchor="middle" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="18" font-weight="700" fill="#7c3e06">3. Applications</text>
    <text x="24" y="72" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#7c3e06">• Personal / Direct Indexing</text>
    <text x="24" y="96" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#7c3e06">• ESG tilts</text>
    <text x="24" y="120" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#7c3e06">• Tax / Turnover-aware rebalancing</text>
  </g>

  <!-- Methods (middle) -->
  <g id="methods" transform="translate(80, 380)">
    <rect x="0" y="0" rx="16" ry="16" width="480" height="160" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
    <text x="240" y="36" text-anchor="middle" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="18" font-weight="700" fill="#065f46">2. Portfolio Optimization Methods</text>
    <text x="24" y="72" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#065f46">• Mean–Variance Optimization (MVO)</text>
    <text x="24" y="96" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#065f46">• Most Diversified Portfolio (MDP)</text>
    <text x="24" y="120" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#065f46">• Distributionally Robust Optimization (DRO)</text>
  </g>

  <!-- Core (bottom) -->
  <g id="core" transform="translate(80, 620)">
    <rect x="0" y="0" rx="16" ry="16" width="480" height="160" fill="#eef4ff" stroke="#3b82f6" stroke-width="2"/>
    <text x="240" y="36" text-anchor="middle" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="18" font-weight="700" fill="#1f3b8f">1. Core Optimization Engine</text>
    <text x="24" y="72" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#1f3b8f">• Data structures: ProblemSpec</text>
    <text x="24" y="96" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#1f3b8f">• Solver adapters: MathOptOSQP (extensible)</text>
    <text x="24" y="120" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="14" fill="#1f3b8f">• Diagnostics: objective, status, residuals</text>
  </g>

  <!-- Arrow defs -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#6b7280"/>
    </marker>
  </defs>

  <!-- Arrows: Core -> Methods -> Applications (center-to-center) -->
  <!-- Center of Core box: (320, 620 + 80) = (320, 700) -->
  <!-- Center of Methods box: (320, 380 + 80) = (320, 460) -->
  <!-- Center of Applications box: (320, 140 + 80) = (320, 220) -->
  <line x1="320" y1="700" x2="320" y2="460" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="320" y1="460" x2="320" y2="220" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Footer note -->
  <g transform="translate(80, 816)">
    <text x="0" y="24" font-family="Inter, Segoe UI, Roboto, Arial, sans-serif" font-size="12" fill="#374151">
      Composition direction: Core Engine → Methods → Applications.
    </text>
  </g>
</svg>
